# risc-v

Repo for some fun RISC-V projects.

## Quick Start

### Clone the repository

    $ git clone https://github.com/xing-benjamin/risc-v.git

### Source the setup script

    $ cd risc-v
    $ source setup.sh

This script sets the environment variable for the root directory of the repo
by calling `git rev-parse --show-toplevel`.  
**Note**: You will need to source the script again anytime you start a new shell session.

### Tools Installation

#### Icarus Verilog

[Icarus Verilog](http://iverilog.icarus.com/) is an open-source Verilog synthesis and
and simulation tool. We will use it to perform RTL compilation to *vvp assembly* format,
which is run by the `vvp` simulator.

Icarus Verilog can be installed using your favorite package manager. On macOS,
[homebrew](https://brew.sh/) is a good option.

    $ brew install icarus-verilog

#### gtkwave

[gtkwave](http://gtkwave.sourceforge.net/) is a waveform viewer that supports various
dumpfile formats, including standard Verilog value change dump (VCD) files.
From homebrew:

    $ brew install --cask gtkwave

Note: Launching gtkwave from the command line may not be as simple as adding an alias
to a shell user config file. To enable launching gtkwave from the command line, follow
the steps in this [tutorial](https://ughe.github.io/2018/11/06/gtkwave-osx).

### Running a simulation

The following is an example of running a simple simulation of a testbench for module
`dl_dff`, a simple D-flip flop:

    $ cd $(REPO_TOP)/design_lib
    $ make dl_dff

The make command will create a build directory, a scratch directory for compile
outputs and files generated by the simulator that will not be tracked by git.

    $ cd build
    $ gtkwave dl_dff_tb.vcd

That's it! More details added to this README soon.